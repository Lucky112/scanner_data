//@version=5
indicator("economic screener")

expr = close
country_code = str.substring(syminfo.ticker, 0, 2)
econ_prefix = syminfo.prefix + ":" + country_code

get_econ(econ_code) => econ = request.security(econ_prefix + econ_code, timeframe.period, expr, lookahead=barmerge.lookahead_on, ignore_invalid_symbol=true)

econ_10y = request.security(country_code + "10Y", timeframe.period, expr, lookahead=barmerge.lookahead_on, ignore_invalid_symbol=true)
plot(econ_10y, title="economics.10Y")
plot(get_econ("GDP"), title="economics.GDP")
plot(get_econ("GDPYY"), title="economics.GDPYY")
plot(get_econ("MGDPYY"), title="economics.MGDPYY")
plot(get_econ("GDPQQ"), title="economics.GDPQQ")
plot(get_econ("GDPPC"), title="economics.GDPPC")
plot(get_econ("GDPPCP"), title="economics.GDPPCP")
plot(get_econ("EMP"), title="economics.EMP")
plot(get_econ("EMR"), title="economics.EMR")
plot(get_econ("FTE"), title="economics.FTE")
plot(get_econ("LFPR"), title="economics.LFPR")
plot(get_econ("LC"), title="economics.LC")
plot(get_econ("LTUR"), title="economics.LTUR")
plot(get_econ("PTE"), title="economics.PTE")
plot(get_econ("POP"), title="economics.POP")
plot(get_econ("RAM"), title="economics.RAM")
plot(get_econ("UP"), title="economics.UP")
plot(get_econ("UR"), title="economics.UR")
plot(get_econ("WG"), title="economics.WG")
plot(get_econ("YUR"), title="economics.YUR")
plot(get_econ("CCP"), title="economics.CCP")
plot(get_econ("EP"), title="economics.EP")
plot(get_econ("FI"), title="economics.FI")
plot(get_econ("IPRI"), title="economics.IPRI")
plot(get_econ("IE"), title="economics.IE")
plot(get_econ("IRMM"), title="economics.IRMM")
plot(get_econ("IRYY"), title="economics.IRYY")
plot(get_econ("HIRMM"), title="economics.HIRMM")
plot(get_econ("HIRYY"), title="economics.HIRYY")
plot(get_econ("PPIYY"), title="economics.PPIYY")
plot(get_econ("PPI"), title="economics.PPI")
plot(get_econ("PPIMM"), title="economics.PPIMM")
plot(get_econ("HB"), title="economics.HB")
plot(get_econ("HOSP"), title="economics.HOSP")
plot(get_econ("ICUB"), title="economics.ICUB")
plot(get_econ("MD"), title="economics.MD")
plot(get_econ("NURS"), title="economics.NURS")
plot(get_econ("LR"), title="economics.LR")
plot(get_econ("CRR"), title="economics.CRR")
plot(get_econ("DIR"), title="economics.DIR")
plot(get_econ("INBR"), title="economics.INBR")
plot(get_econ("INTR"), title="economics.INTR")
plot(get_econ("LG"), title="economics.LG")
plot(get_econ("PDG"), title="economics.PDG")
plot(get_econ("CAG"), title="economics.CAG")
plot(get_econ("TOT"), title="economics.TOT")
plot(get_econ("TI"), title="economics.TI")
plot(get_econ("TA"), title="economics.TA")
plot(get_econ("WES"), title="economics.WES")
plot(get_econ("NGIR"), title="economics.NGIR")
plot(get_econ("NGI"), title="economics.NGI")
plot(get_econ("COP"), title="economics.COP")
plot(get_econ("COIR"), title="economics.COIR")
plot(get_econ("AA"), title="economics.AA")
plot(get_econ("GBP"), title="economics.GBP")
plot(get_econ("GDG"), title="economics.GDG")
plot(get_econ("GSG"), title="economics.GSG")
plot(get_econ("ME"), title="economics.ME")
plot(get_econ("CAP"), title="economics.CAP")
plot(get_econ("CAR"), title="economics.CAR")
plot(get_econ("CEP"), title="economics.CEP")
plot(get_econ("GCI"), title="economics.GCI")
plot(get_econ("GCR"), title="economics.GCR")
plot(get_econ("CORPI"), title="economics.CORPI")
plot(get_econ("CORR"), title="economics.CORR")
plot(get_econ("COR"), title="economics.COR")
plot(get_econ("EDBR"), title="economics.EDBR")
plot(get_econ("ELP"), title="economics.ELP")
plot(get_econ("IPYY"), title="economics.IPYY")
plot(get_econ("IPMM"), title="economics.IPMM")
plot(get_econ("ISP"), title="economics.ISP")
plot(get_econ("MPRYY"), title="economics.MPRYY")
plot(get_econ("MIP"), title="economics.MIP")
plot(get_econ("SP"), title="economics.SP")
plot(get_econ("TVS"), title="economics.TVS")
plot(get_econ("CPI"), title="economics.CPI")
plot(get_econ("BLR"), title="economics.BLR")
plot(get_econ("CCI"), title="economics.CCI")
plot(get_econ("HICP"), title="economics.HICP")
plot(get_econ("GASP"), title="economics.GASP")
plot(get_econ("HDG"), title="economics.HDG")
plot(get_econ("RSYY"), title="economics.RSYY")
plot(get_econ("RSMM"), title="economics.RSMM")
plot(get_econ("COUT"), title="economics.COUT")
plot(get_econ("HOR"), title="economics.HOR")
plot(get_econ("CPIHU"), title="economics.CPIHU")
plot(get_econ("CTR"), title="economics.CTR")
plot(get_econ("PITR"), title="economics.PITR")
plot(get_econ("STR"), title="economics.STR")
plot(get_econ("SSR"), title="economics.SSR")
plot(get_econ("SSRC"), title="economics.SSRC")
plot(get_econ("SSRE"), title="economics.SSRE")
